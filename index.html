<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Quiz Form</title>
</head>
<body>

<form id="quizForm">
  <label>Choice 1: <input name="choice1" /></label><br>
  <label>Choice 2: <input name="choice2" /></label><br>
  <label>Choice 3: <input name="choice3" /></label><br>
  <label>Choice 4: <input name="choice4" /></label><br>
  <label>Choice 5: <input name="choice5" /></label><br>
  <button type="submit">Submit</button>
</form>

<div id="result" style="display:none;">
  <p id="feedback"></p>
  <img id="feedbackImg" src="" alt="Feedback Image" width="100">
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycby0zKc2pskWdxvzo8PzTsCrKiQk-SRAinR36Bd3LUMBFMRK3ZQsAxGlNLeWasED78Fm/exec";

document.getElementById("quizForm").addEventListener("submit", function(e){
  e.preventDefault();

  const formData = new FormData(this);
  const choices = Object.fromEntries(formData.entries());

  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î feedback ‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ
  let feedback = "";
  let image = "";

  if (choices.choice1 === "‡∏Ç" && choices.choice2 === "‡∏Å") {
    feedback = "‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! üëç";
    image = "images/success.png";
  } else if (choices.choice1 === "‡∏Ç" && choices.choice2 !== "‡∏Å") {
    feedback = "‡∏î‡∏µ‡∏°‡∏≤‡∏Å üëè";
    image = "images/positive.png";
  } else if (choices.choice1 === "‡∏Å" || choices.choice2 === "‡∏á") {
    feedback = "‡∏•‡∏≠‡∏á‡∏ü‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏à‡∏ö üò†";
    image = "images/calm.png";
  } else if (choices.choice2 === "‡∏Ñ" || choices.choice4 === "‡πÄ‡∏î‡∏¥‡∏ô‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°") {
    feedback = "‡πÄ‡∏î‡∏¥‡∏ô‡∏≠‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏ä‡πà‡∏ß‡∏¢ üö∂";
    image = "images/warning.png";
  } else {
    feedback = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏£‡∏ö üôè";
    image = "images/alert.png";
  }

  // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
  document.getElementById("feedback").textContent = feedback;
  document.getElementById("feedbackImg").src = image;
  document.getElementById("result").style.display = "block";

  // ‡πÄ‡∏û‡∏¥‡πà‡∏° feedback ‡πÄ‡∏Ç‡πâ‡∏≤ formData
  formData.append("feedback", feedback);

  // ‡∏™‡πà‡∏á form-encoded ‚Üí ‡πÑ‡∏°‡πà‡πÇ‡∏î‡∏ô CORS
  fetch(scriptURL, {
    method: "POST",
    body: new URLSearchParams(formData) // ‚úÖ ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô form-encoded
  })
  .then(res => res.json())
  .then(res => {
    console.log("Success:", res);
    alert("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
  })
  .catch(err => {
    console.error("Error:", err);
    alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î");
  });

});
</script>
</body>
</html>
